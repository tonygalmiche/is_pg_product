<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>


   
        <!-- Segment -->
        <record id="is_product_segment_view_tree" model="ir.ui.view">
            <field name="name">is.product.segment.view.tree</field>
            <field name="model">is.product.segment</field>
            <field name="arch" type="xml">
                <tree string="Segments">
                    <field name="name" />
                </tree>
            </field>
        </record>
        <record id="is_product_segment_view_form" model="ir.ui.view">
            <field name="name">is.product.segment.view.form</field>
            <field name="model">is.product.segment</field>
            <field name="arch" type="xml">
                <form string="Segments">
                  <group>
                    <field name="name" />
                    <field name="family_line">
                        <tree string="Familles" editable="bottom">
                            <field name="name" />
                            <field name="segment_id" required="0" invisible="1" />
                        </tree>
                    </field>
                    <field name="description" placeholder="Commentaire ..."/>
                  </group>                   
                </form>
            </field>
        </record>
        <record id="action_product_segment" model="ir.actions.act_window">
            <field name="name">Segments</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">is.product.segment</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>
              
        <!-- Families -->
        <record id="is_product_family_view_tree" model="ir.ui.view">
            <field name="name">is.product.family.view.tree</field>
            <field name="model">is.product.famille</field>
            <field name="arch" type="xml">
                <tree string="Familles">
                    <field name="name" />
                    <field name="segment_id" />
                </tree>
            </field>
        </record>
        
        <record id="is_product_family_view_form" model="ir.ui.view">
            <field name="name">is.product.family.view.form</field>
            <field name="model">is.product.famille</field>
            <field name="arch" type="xml">
                <form string="Familles">
                  <group>
                    <field name="name" />
                    <field name="segment_id" />
                  </group>
                  <group>
                    <field name="sub_family_line" >
                        <tree string="Sous Familles" editable="bottom">
                            <field name="name" />
                            <field name="family_id" required="0" invisible="1" />
                        </tree>
                    </field>
                    <field name="description" placeholder="Commentaire ..."/>  
                  </group>                
                </form>
            </field>
        </record>
        
        <record id="action_product_family" model="ir.actions.act_window">
            <field name="name">Familles</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">is.product.famille</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>
        
              
        <!-- Sub Families -->
        <record id="is_product_subfamily_view_tree" model="ir.ui.view">
            <field name="name">is.product.subfamily.view.tree</field>
            <field name="model">is.product.sous.famille</field>
            <field name="arch" type="xml">
                <tree string="Sous familles">
                    <field name="name" />
                    <field name="family_id" />
                </tree>
            </field>
        </record>
        
        <record id="is_product_subfamily_view_form" model="ir.ui.view">
            <field name="name">is.product.subfamily.view.form</field>
            <field name="model">is.product.sous.famille</field>
            <field name="arch" type="xml">
                <form string="Sous familles">
                  <group>
                    <field name="name" />
                    <field name="family_id" />
                  </group>
                    <field name="description" placeholder="Commentaire ..."/>                   
                </form>
            </field>
        </record>
        
        <record id="action_product_subfamily" model="ir.actions.act_window">
            <field name="name">Sous familles</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">is.product.sous.famille</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>
        
              


        <!-- Section analytique -->
        <record id="is_section_analytique_tree_view" model="ir.ui.view">
            <field name="name">is_section_analytique_tree_view</field>
            <field name="model">is.section.analytique</field>
            <field name="arch" type="xml">
                <tree editable="top">
                    <field name="name" />
                </tree>
            </field>
        </record>
        <record id="is_section_analytique_action" model="ir.actions.act_window">
            <field name="name">Section analytique</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">is.section.analytique</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree</field>
        </record>

        <!-- Responsable budget -->
        <record id="is_budget_responsable_tree_view" model="ir.ui.view">
            <field name="name">is_budget_responsable_tree_view</field>
            <field name="model">is.budget.responsable</field>
            <field name="arch" type="xml">
                <tree editable="top">
                    <field name="name" />
                </tree>
            </field>
        </record>
        <record id="is_budget_responsable_action" model="ir.actions.act_window">
            <field name="name">Responsable budget</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">is.budget.responsable</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree</field>
        </record>

        <!-- Nature budget -->
        <record id="is_budget_nature_tree_view" model="ir.ui.view">
            <field name="name">is_budget_nature_tree_view</field>
            <field name="model">is.budget.nature</field>
            <field name="arch" type="xml">
                <tree editable="top">
                    <field name="name" />
                </tree>
            </field>
        </record>
        <record id="is_budget_nature_action" model="ir.actions.act_window">
            <field name="name">Responsable nature</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">is.budget.nature</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree</field>
        </record>




        <!-- Masquer les champs -->
        <record id="is_product_champs_view_tree" model="ir.ui.view">
            <field name="name">is.product.champs.view.tree</field>
            <field name="model">is.product.view</field>
            <field name="arch" type="xml">
                <tree string="Masquer les champs">
                    <field name="fields_id" />
                    <field name="segment_id" />
                </tree>
            </field>
        </record>
        
        <record id="is_product_champs_view_form" model="ir.ui.view">
            <field name="name">is.product.champs.view.form</field>
            <field name="model">is.product.view</field>
            <field name="arch" type="xml">
                <form string="Masquer les champs">
                  <group>
                    <field name="fields_id" />
                    <field name="segment_id" />
                  </group>
                </form>
            </field>
        </record>
        
        <record id="action_product_champs" model="ir.actions.act_window">
            <field name="name">Masquer champs</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">is.product.view</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>
        
        <menuitem
              id="menu_action_product_champs" 
              parent="base.menu_product"
              sequence="45"
              action="action_product_champs" 
              groups="group_is_pg_manager" />
    
        <!-- Fiche Article -->
        <record id="is_product_template_only_form_view" model="ir.ui.view">
            <field name="name">is_product_template_only_form_view</field>
            <field name="model">product.template</field>
            <field name="inherit_id" ref="product.product_template_only_form_view"/>
            <field name="arch" type="xml">


                <xpath expr="//field[@name='image_medium']" position="before">
                    <img src='/is_pg_product/static/src/img/logo_rs.png' attrs="{'invisible': [('is_soumise_regl', '!=', 'SR')]}" style="height:64px" />
                </xpath>
                <xpath expr="//field[@name='image_medium']" position="before">
                    <img src='/is_pg_product/static/src/img/logo_r.png'  attrs="{'invisible': [('is_soumise_regl', '!=', 'R')]}"  style="height:64px" />
                </xpath>



                
                <xpath expr="//field[@name='default_code']" position="replace">
                    <field name="related_is_ref_plan" invisible="1"/>
                    <field name="is_ref_plan" attrs="{'invisible': [('related_is_ref_plan', '=', True)]}"/>
                    <field name="related_is_ind_plan" invisible="1"/>
                    <field name="is_ind_plan" attrs="{'invisible': [('related_is_ind_plan', '=', True)]}"/>
                    <field name="related_is_nomenclature_douaniere" invisible="1"/>
                    <field name="is_nomenclature_douaniere" attrs="{'invisible': [('related_is_nomenclature_douaniere', '=', True)]}"/>
                    <field name="related_is_couleur" invisible="1"/>
                    <field name="is_couleur" attrs="{'invisible': [('related_is_couleur', '=', True)]}"/>
                    <field name="related_is_produit_perissable" invisible="1"/>
                    <field name="is_produit_perissable" attrs="{'invisible': [('related_is_produit_perissable', '=', True)]}"/>
                </xpath>
                
                <xpath expr="//field[@name='uom_id']" position="after">
                    <field name="related_is_mold_id" invisible="1"/>
                    <field name="is_mold_id" attrs="{'invisible': [('related_is_mold_id', '=', True)]}"/>
                    <field name="related_is_dossierf_id" invisible="1"/>
                    <field name="is_dossierf_id" attrs="{'invisible': [('related_is_dossierf_id', '=', True)]}"/>

                    <field name="related_is_client_id" invisible="1"/>
                    <field name="is_client_id" domain="[('customer','=',True),('is_company','=',True)]" attrs="{'invisible': [('related_is_client_id', '=', True)]}" />

                    <field name="related_is_ref_client" invisible="1"/>
                    <field name="is_ref_client" attrs="{'invisible': [('related_is_ref_client', '=', True)]}"/>


                    <field name="related_is_ref_fournisseur" invisible="1"/>
                    <field name="is_ref_fournisseur" attrs="{'invisible': [('related_is_ref_fournisseur', '=', True)]}"/>
                    <field name="related_is_origine_produit_id" invisible="1"/>
                    <field name="is_origine_produit_id" attrs="{'invisible': [('related_is_origine_produit_id', '=', True)]}"/>
                </xpath> 
                <xpath expr="//div[@class='oe_title']" position="replace" />
                <xpath expr="//div[@name='options']" position="replace" />
                
                <xpath expr="//page[@string='Sales']" position="after">
                    <page string="Fabrication">
                    <group colspan="4">
                          <group>
                              <field name="related_is_stock_secu" invisible="1"/>
                            <field name="is_stock_secu" attrs="{'invisible': [('related_is_stock_secu', '=', True)]}"/>
                            <field name="related_lot_mini" invisible="1"/>
                            <field name="lot_mini" attrs="{'invisible': [('related_lot_mini', '=', True)]}"/>
                            <field name="related_multiple" invisible="1"/>
                            <field name="multiple" attrs="{'invisible': [('related_multiple', '=', True)]}"/>




                            <field name="related_temps_realisation" invisible="1"/>
                            <field name="temps_realisation" attrs="{'invisible': [('related_temps_realisation', '=', True)]}"/>
                            <field name="related_is_perte" invisible="1"/>
                            <field name="is_perte" attrs="{'invisible': [('related_is_perte', '=', True)]}"/>
                            <field name="related_is_destockage" invisible="1"/>
                            <field name="is_destockage" attrs="{'invisible': [('related_is_destockage', '=', True)]}"/>
                          </group>
                          <group>
                              <field name="related_is_soumise_regl" invisible="1"/>
                            <field name="is_soumise_regl" attrs="{'invisible': [('related_is_soumise_regl', '=', True)]}"/>
                            <field name="related_is_livree_aqp" invisible="1"/>
                            <field name="is_livree_aqp" attrs="{'invisible': [('related_is_livree_aqp', '=', True)]}"/>
                            <field name="related_is_droite_grauche" invisible="1"/>
                            <field name="is_droite_grauche" attrs="{'invisible': [('related_is_droite_grauche', '=', True)]}"/>
                          </group>
                    </group>
                        </page>
                        <!--
                        <page string="Autre">
                            <group>
                                <field name="sale_ok"/>
                                <field name="purchase_ok"/>
                            </group>
                        </page>
                        -->
                </xpath>

                <field name="produce_delay" position="after">
                </field>

                <group name="sale_condition" position="inside">
                    <field name="related_delai_cq" invisible="1"/>
                    <label for="delai_cq" attrs="{'invisible': [('related_delai_cq', '=', True)]}"/>
                    <div attrs="{'invisible': [('related_delai_cq', '=', True)]}">
                        <field name="delai_cq" class="oe_inline"/> jours
                    </div>
                </group>




                
                <xpath expr="//field[@name='image_medium']" position="after">
                    <group>
                        <field name="is_code"/>
                        <field name="name" string="Désignation"/>
                        <field name="segment_id" on_change="onchange_segment_id(segment_id)"/>
                        <field name="family_id" context="{'default_segment_id':segment_id}" on_change="onchange_family_id(family_id)"/>
                        <field name="sub_family_id" context="{'default_family_id':family_id}" />
                    </group>
                </xpath> 
                
                <notebook position="before">
                    <group colspan="4">
                        <group>
                            <field name="related_is_category_id" invisible="1"/>
                            <field name="is_category_id" attrs="{'invisible': [('related_is_category_id', '=', True)]}"/>
                            <field name="related_is_gestionnaire_id" invisible="1"/>
                            <field name="is_gestionnaire_id" attrs="{'invisible': [('related_is_gestionnaire_id', '=', True)]}"/>
                        </group>
                        <group>
                            <field name="sale_ok"/>
                            <field name="purchase_ok"/>
                        </group>
                    </group>
                </notebook>






                <xpath expr="//group[@name='sale_condition']" position="after">
                      <group string='Livraison'>
                        <field name="lot_livraison"/>
                        <field name="multiple_livraison" />
                      </group>
                </xpath>             


                <xpath expr="//label[@for='sale_delay']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>             
                <xpath expr="//field[@name='sale_delay']/parent::*" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>             
                


                <xpath expr="//field[@name='taxes_id']" position="after">
                    <field name="is_section_analytique_id"/>
                    <field name="is_budget_nature_id"/>
                    <field name="is_budget_responsable_id"/>
                    <field name="is_budget_fv"/>
                </xpath>             



                <xpath expr="//group[@name='lot']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>             




<!--
                    <label for="sale_delay"/>
                    <div>
                        <field name="sale_delay" attrs="{'readonly':[('sale_ok','=',False)]}" class="oe_inline" style="vertical-align:baseline"/> days
                    </div>
-->



            </field>
        </record> 

        <!--
        <record id="is_pg_product_buttons_view_form" model="ir.ui.view">
            <field name="name">is.pg.product.buttons.view.form</field>
            <field name="model">product.template</field>
            <field name="inherit_id" ref="stock.product_form_view_procurement_button"/>
            <field name="arch" type="xml">      
                <xpath expr="//button[@name='action_view_routes']" position="replace" />
                <xpath expr="//button[@string='Reordering Rules']" position="replace" />
            </field>
       </record>
        -->




    <!-- tree -->
    <record model="ir.ui.view" id="is_product_tree_view">
      <field name="name">is_product_tree_view</field>
      <field name="model">product.template</field>
      <field name="type">tree</field>
       <field name="arch" type="xml">
        <tree string="tree">
          <field name="is_code"/>
          <field name="name" string="Désignation"/>
          <field name="segment_id"/>
          <field name="family_id"/>
          <field name="is_category_id"/>
          <field name="is_gestionnaire_id"/>
          <field name="is_mold_id"/>
          <field name="is_dossierf_id"/>
          <field name="is_client_id"  />
          <field name="is_ref_client"/>
          <field name="is_ref_plan"/>
          <field name="is_ind_plan"/>
          <field name="uom_id"/>
          <field name="qty_available" string="Stock"  digits="(14, 0)"/>
        </tree>
      </field>
    </record>


    <!-- search -->
    <record model="ir.ui.view" id="is_product_search_view" >
        <field name="name">is_product_search_view</field>
        <field name="model">product.template</field>
        <field name="arch" type="xml">
            <search string="Recherche">
                <field name="is_code"/>
                <field name="name"/>
                <field name="segment_id"/>
                <field name="family_id"/>
                <field name="is_category_id"/>
                <field name="is_gestionnaire_id"/>
                <field name="is_mold_id"/>
                <field name="is_dossierf_id"/>
                <field name="is_client_id"  />
                <field name="is_ref_client"/>
            </search>
        </field>
    </record>





    <!-- action -->
    <record model="ir.actions.act_window" id="is_product_action">
      <field name="name">Articles</field>
      <field name="res_model">product.template</field>
      <field name="view_type">form</field>
      <field name="view_mode">tree,form</field>
      <field name="view_id" ref="is_product_template_only_form_view"/>
      <field name="search_view_id" ref="is_product_search_view"/>
    </record>
    <record model="ir.actions.act_window.view" id="is_product_action_tree">
        <field name="act_window_id" ref="is_product_action"/>
        <field name="sequence" eval="1"/>
        <field name="view_mode">tree</field>
        <field name="view_id" ref="is_product_tree_view"/>
    </record>



    </data>
</openerp>
